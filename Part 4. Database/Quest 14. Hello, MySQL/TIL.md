# Quest 14. Hello, MySQL

## 1. What is RDBMS?

### 1.0 What is Database?

일반적으로 컴퓨터 시스템 내 전자 방식으로 저장된 구조화된 정보 또는 데이터의 조직적 집합을 의미한다. 데이터 베이스는 데이터베이스 관리 시스템 (DBMS)에 의해 제어되며, 데이터와 DBMS는 연관된 어플리케이션과 함께 `데이터 베이스 시스템` 또는 `데이터베이스`라고 통칭된다.

현재 운용되는 가장 공통적인 유형의 데이터베이스(관계형 데이터 베이스, RDBMS) 내에 데이터는 일련의 표 안에 행과 열로 모델링 되는데 이는 프로세싱과 데이터 쿼리 작업을 더 효율적으로 실행하기 위함이다. 이로써 데이터는 쉽게 액세스, 관리, 수정, 업데이트, 제어, 체계화 될 수 있다. 대부분의 데이터베이스는 데이터 작성 및 쿼리 작업을 위해 SQL을 사용한다.

### 1.1 Why Use DataBase

* 대량의 데이터 중에서 필요한 것을 빨리 반환할 수 있다.
  * 데이터 베이스는 효율적으로 데이터 구조를 관리하는 것을 목적으로 한다.
  * 대량의 데이터에서 효율적인 탐색을 위해 검색 알고리즘 및 인덱스와 같은 데이터 구조로 레코드를 관리한다.
  
* 데이터를 안전하게 저장하기 위해 필요하다
  * 인메모리 데이터는 휘발성이 강하여, 빠른접근은 가능하지만 오류시 복구에 큰 차질을 빚는다.
  * 검색 뿐만 아니라 저장, 복구, 보안등을 효율적으로 관리 할 수 있게 한다.

* 병렬성 제어를 용이하게 해준다.
  * 배타 제어의 범위를 손쉽게 설정 할 수 있다.
  * 상호 배제를 하는데 용이하다.

* 데이터의 무결성을 보장한다.
  * 제약 조건 및 영속성 있는 ID 부여 및 다양한 방법으로 데이터의 무결성을 보장한다.

### 1.2 What is MySQL?

세계에서 가장 많이 쓰이는 오픈 소스의 관계형 데이터베이스 관리 시스템(RDBMS)이다.  
다중 스레드, 다중 사용자 형식의 구조질의어 형식의 데이터베이스 관리 시스템으로서 오라클이 관리 및 지원하고 있으며 이중 라이선스가 적용된다.

#### 1.2.1 MySQL Enginens

데이터 베이스를 어떻게 구현하여 사용 할 지는 데이터 베이스의 용도에 따라 달라진다. MySQL에서는 다양한 레코드 처리 방법을 제공하고 있기에 용도에 맞는 것을 선택할 수 있는 아키텍처를 채용하고 있다. 이것들을 스토리지 엔진이라고 한다.  
 스토리지 엔진의 선택은 테이블 단위로 할 수 있다. 따라서 어플리케이션에서 여러 스토리지 엔진을 혼합할 수 있다.

* InnoDB  
  MySQL에서 가장 널리 사용되고 있는, 기본값으로 지정되는 스토리지 엔진이다.
  * 트랜잭션을 지원한다. 즉 transaction-safe 하다.
  * 커밋과 롤백, 데이터 복구 기능을 제공한다.
  * 기본적으로 row-level locking을 제공한다.
  * 데이터를 clustered index에 저장하여 PK 기반의 query I/O 비용을 줄인다.
  * FK 제약을 제공하여 데이터 무결성을 보장한다.

* MyISAM
  * 트랜잭션을 지원하지 않고 table level locking을 제공한다.
  * multi-thread 환경에서 성능이 저하 될 수 있다.

* Archive
  * 로그 수집에 적합한 엔진이다.
  * 데이터가 메모리상에서 압축되고 압축된 상태로 디스크에 저장 된다.
  * row-level locking이 가능하다.
  * 한번 Insert되면 UPDATE, DELETE를 사용할 수 없다.
  * 인덱스를 지원하지 않는다.
  * 테이블 파티셔닝을 지원한다.
  * 트랜잭션은 지원하지 않는다.

#### 1.2.2 MySQL Data Type

##### 문자열

- CHAR : `CHAR(n)` 으로 스트링 데이터 타입을 지정 할 수 있다.  
`n <= 65535`  
`n`만큼의 메모리를 지정하기 때문에, 이 데이터 타입을 쓰는 변수가 n 만큼의 크기를 갖지 않더라도 공백으로 빈 칸을 채운다.  
해당 변수의 크기를 줄이는 작업이 없기 때문에 varchar보다 오버헤드가 적게든다.

- VARCHAR : VARiable length CHARacter string으로, `varchar(n)`로 스트링 데이터 타입을 지정 할 수 있다.  
`n <= 255`  
`char`와 다르게, 지정한 크기보다 작은 string의 경우 할당된 n만큼 값을 차지하는게 아니라, 그 string의 크기 만큼 메모리를 차지한다. 그렇기에 char보다 overhead를 더 사용한다.

- TEXT : 필드의 기본 값(default)를 가질 수 없으며, TEXT를 인덱싱 할 때 `n`을 정의하는데, 이 `n`은 처음 `n`개의 문자만 인덱스 할 수 있음을 의미한다. 그렇기에, 필드 전체를 검색하는 로직이 있는 경우 `TEXT` 타입보다 `CHAR` 또는 `VARCHAR`를 사용하는게 더 나으며, 필드 앞에 몇 개의 글자만 검색하는 경우에는 `TEXT`를 사용하는 것도 좋다.

  - TINYTEXT(n) : 최대 n (<= 255)
  - TEXT(n) : 최대 n (<= 65535)
  - MEDIUMTEXT(n) : 최대 n (<= 16777215)
  - LONGTEXT(n) : 최대 n (<= 4294967295)

```
특정 텍스트 값이 저장 될 때, 그 해당 데이터의 텍스트 길이의 유동 폭이 크고, 메모리 관리가 중요 할 경우  
varchar를 쓰는게 더 효율적이고, 텍스트 길이의 유동 폭이 적고, 빠른 읽기 작업이 필요 할 경우 char를 쓰는게 더 나은 사용이다.
```

##### Binary 형

- BINARY : `BINARY(n)` 일반 텍스트와 관련 없는 문자의 전체 바이트를 저장하는데 사용한다.  
GIF와 같은 이미지를 저장하는데 사용되기도 하며, `n <= 255` 이다.

- VARBINARY : `BINARY`의 variable length를 가질 수 있는 값으로 최대 `n <= 65535` 크기의 값을 가질 수 있다.

- BLOB : Binary Large Object. 크기가 65535 바이트를 넘는 바이너리 데이터에 가장 유용하며, `BINARY`와 다른점은 기본 값을 가질 수 없다는 것이다.
  - TINYBLOB(n) : 최대 n (<= 255)
  - BLOB(n) : 최대 n (<= 65535)
  - MEDIUMBLOB(n) : 최대 n (<= 16777215)
  - LONGBLOB(n) : 최대 n (<= 4294967295)

##### 숫자형

float을 제외한 모든 수는 `signed`와 `unsigned`를 가지고 있다.
| datatype | byte | min value(signed / unsigned) | max value(signed / unsgined) |
|----------|------|------------------------------|------------------------------|
| TINYINT  |  1   | -128 / 0 | 127 / 255 |
| SMALLINT | 2 | -32768 / 0 | 32767 / 65535 |
| MEDIUMINT | 3 | -8388608 / 0 | 8388607 / 16777215 |
| INT(INTEGER) | 4 | -2^31 / 0 | 2^31 -1 / 2^32-1 |
| BIGINT | 8 | -2^63 / 0 | 2^63 + 1 / 2^64 - 1 |
| FLOAT | 4 | 3.4E-38(-3.4*10^38) ~ 3.4E+38(3.4*10^38) |
| DOUBLE(REAL) | 8 | 1.79E-308(-1.79*10^308) ~ 1.79E+308(1.79*10^308) |

### 1.3 What is Indexing?

## 2. SQL Query

### 2.1 Create

### 2.2 Read

### 2.3 Update

### 2.4 Delete

## 3. Hashing

### 3.1 Data Structure related Hashing

### 3.2 Hashing Algorhythm

